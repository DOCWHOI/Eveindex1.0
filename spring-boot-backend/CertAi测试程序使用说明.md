# CertAi 测试程序使用说明

## 📋 **功能概述**

`CertAi.java` 是一个AI分析服务组件，用于与火山引擎AI服务进行交互，支持文本和图片的多模态分析。

## 🚀 **新增功能**

### **1. 主函数测试**
- 添加了 `main` 函数，可以直接运行进行测试
- 提供交互式菜单，支持多种测试模式

### **2. 纯文本分析**
- 新增 `sendTextMessage(String text)` 方法
- 支持纯文本输入，获取AI分析结果

### **3. 多模态分析**
- 保留原有的 `sendMessage(String text, String imageUrl)` 方法
- 支持文本+图片的联合分析

## 🎯 **测试模式**

### **模式1: 纯文本测试**
- 输入任意文本内容
- AI会分析文本并返回结果
- 适用于认证文档分析、风险识别等场景

### **模式2: 文本+图片测试**
- 输入文本描述和图片URL
- AI会同时分析文本和图片内容
- 适用于认证证书、产品图片等场景

### **模式3: 预设测试用例**
- 提供5个预设的认证相关测试用例
- 自动运行所有测试用例
- 适用于快速验证功能

## 🔧 **运行方法**

### **方法1: 使用批处理脚本**
```bash
# 双击运行
test_cert_ai.bat
```

### **方法2: 命令行运行**
```bash
# 编译项目
mvn clean compile

# 运行测试程序
java -cp "target/classes;target/dependency/*" com.certification.analysis.analysisByai.CertAi
```

## ⚙️ **配置说明**

### **测试配置**
程序使用内置的测试配置：
- API URL: `https://ark.cn-beijing.volces.com/api/v3`
- API Key: `test-api-key` (需要替换为真实密钥)
- Model ID: `test-model-id` (需要替换为真实模型ID)

### **生产环境配置**
在 `application.yml` 中添加：
```yaml
volc:
  ai:
    api-key: "your-real-api-key"
    model-id: "your-real-model-id"
    api-url: "https://ark.cn-beijing.volces.com/api/v3"
```

## 📝 **使用示例**

### **示例1: 认证文档分析**
```
输入: "请分析这个医疗器械认证文档的内容"
输出: AI会分析文档内容并返回关键信息
```

### **示例2: 风险等级评估**
```
输入: "分析这个召回通知的风险等级"
输出: AI会评估风险等级并提供建议
```

### **示例3: 产品分类**
```
输入: "这个设备属于哪类医疗器械？"
输出: AI会进行产品分类并提供依据
```

## ⚠️ **注意事项**

1. **API密钥**: 需要配置真实的火山引擎AI API密钥
2. **网络连接**: 需要能够访问火山引擎AI服务
3. **图片URL**: 图片URL必须是可公开访问的
4. **请求限制**: 注意API的请求频率限制

## 🐛 **错误处理**

程序包含完善的错误处理机制：
- 网络连接错误
- API密钥无效
- 图片URL无效
- 服务不可用

## 📊 **测试结果**

程序会显示：
- 输入内容
- AI分析结果
- 错误信息（如果有）
- 可能的原因分析

## 🔄 **退出程序**

在菜单中选择 `0` 即可退出测试程序。

---

**注意**: 这是一个测试程序，主要用于验证AI分析功能。在生产环境中，建议通过Spring Boot的依赖注入来使用 `CertAi` 组件。
