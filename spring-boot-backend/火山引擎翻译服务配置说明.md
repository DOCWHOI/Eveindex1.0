# 火山引擎翻译服务配置说明 (SDK版本)

## 配置文件位置
```
D:\Project\AAAA\spring-boot-backend\src\main\resources\application.yml
```

## 依赖说明
项目使用火山引擎官方Java SDK：
```xml
<dependency>
    <groupId>com.volcengine</groupId>
    <artifactId>volc-sdk-java</artifactId>
    <version>1.0.89</version>
</dependency>
```

## 配置方式

### 方式1：环境变量配置（推荐）
在系统环境变量中设置：
- `VOLCENGINE_ACCESS_KEY` - 访问密钥
- `VOLCENGINE_SECRET_KEY` - 密钥

#### Windows设置：
```cmd
# 临时设置（当前会话有效）
set VOLCENGINE_ACCESS_KEY=your_access_key_here
set VOLCENGINE_SECRET_KEY=your_secret_key_here

# 永久设置（需要管理员权限）
setx VOLCENGINE_ACCESS_KEY "your_access_key_here"
setx VOLCENGINE_SECRET_KEY "your_secret_key_here"
```

#### Linux/Mac设置：
```bash
# 临时设置
export VOLCENGINE_ACCESS_KEY=your_access_key_here
export VOLCENGINE_SECRET_KEY=your_secret_key_here

# 永久设置（添加到 ~/.bashrc 或 ~/.zshrc）
echo 'export VOLCENGINE_ACCESS_KEY=your_access_key_here' >> ~/.bashrc
echo 'export VOLCENGINE_SECRET_KEY=your_secret_key_here' >> ~/.bashrc
```

### 方式2：配置文件设置
在 `application.yml` 中直接设置：

```yaml
# 火山引擎翻译服务配置
volcengine:
  translate:
    access-key: your_access_key_here    # 直接设置访问密钥
    secret-key: your_secret_key_here    # 直接设置密钥
    region: cn-north-1                  # 服务区域
    api-url: https://translate.volcengineapi.com  # 翻译API地址
```

## 当前配置说明

配置文件中的设置：
```yaml
volcengine:
  translate:
    access-key: ${VOLCENGINE_ACCESS_KEY:}  # 优先从环境变量获取
    secret-key: ${VOLCENGINE_SECRET_KEY:}  # 优先从环境变量获取
    region: cn-north-1                     # 服务区域
    api-url: https://translate.volcengineapi.com  # 翻译API地址
```

**配置优先级**：
1. 环境变量 `VOLCENGINE_ACCESS_KEY` 和 `VOLCENGINE_SECRET_KEY`
2. 如果环境变量为空，则使用配置文件中的值（当前为空）

## 获取API密钥步骤

1. **注册火山引擎账号**
   - 访问：https://www.volcengine.com/
   - 注册并完成实名认证

2. **开通翻译服务**
   - 登录控制台
   - 找到"机器翻译"服务
   - 开通服务

3. **获取API密钥**
   - 在控制台中找到"访问密钥管理"
   - 创建新的访问密钥
   - 记录 Access Key ID 和 Secret Access Key

## 测试配置

### 1. 检查环境变量
```cmd
test_api_keys.bat
```

### 2. 测试翻译服务 (SDK版本)
```cmd
test_translate_ai_sdk.bat
```

### 3. 测试翻译服务 (WebClient版本，已废弃)
```cmd
test_translate_ai.bat
```

## 安全建议

1. **推荐使用环境变量**：避免将密钥直接写在配置文件中
2. **不要提交密钥到版本控制**：确保密钥不会泄露到代码仓库
3. **定期轮换密钥**：定期更新API密钥以提高安全性

## 故障排除

### 常见问题：

1. **服务不可用**
   - 检查网络连接
   - 验证API密钥是否正确
   - 确认服务区域设置

2. **翻译失败**
   - 检查API配额是否用完
   - 验证请求格式是否正确
   - 查看错误日志

3. **配置不生效**
   - 重启应用程序
   - 检查配置文件语法
   - 验证环境变量设置

## 使用示例

```java
@Autowired
private TranslateAI translateAI;

// 翻译单个文本
String result = translateAI.translateSingleText("Hello World");

// 检查服务状态
boolean available = translateAI.isAvailable();
String status = translateAI.getServiceStatus();
```
